<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Whistant</title>
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<div class="app">
		<!-- Header -->
		<header class="header">
			<div class="logo">Whistant Server</div>
			<div class="subtitle">Link Ollama Server to iPhone Task</div>
			<div class="status-bar">
				<div class="status-item">
					<span class="status-icon" id="ollama-status">‚è≥</span>
					<span class="status-text">Ollama</span>
				</div>
				<div class="status-item">
					<span class="status-icon" id="cloudflared-status">‚è≥</span>
					<span class="status-text">Tunnel</span>
				</div>
			</div>
		</header>

		<!-- Main Content -->
		<main class="content">
			<!-- Screen: Check Ollama -->
			<div class="screen active" id="screen-check-ollama">
				<div class="step-indicator">
					<div class="step active"></div>
					<div class="step"></div>
					<div class="step"></div>
				</div>

				<div class="icon">üîç</div>

				<h2>Checking Ollama...</h2>
				<p class="muted">Looking for Ollama server on localhost:11434</p>

				<div id="check-progress" class="loading">
					<div class="spinner"></div>
				</div>
			</div>

		<!-- Screen: Enter Link Code -->
		<div class="screen" id="screen-enter-code">
			<div class="step-indicator">
				<div class="step done"></div>
				<div class="step active"></div>
				<div class="step"></div>
			</div>

			<div class="icon">üîë</div>

			<h2>Enter Link Code</h2>
			<p>Open Whistant on your iPhone and get your link code</p>

			<div class="form">
				<input 
					type="text" 
					id="link-code-input" 
					placeholder="Enter 6-character code"
					maxlength="6"
					style="width: 100%; padding: 12px; font-size: 18px; text-align: center; text-transform: uppercase; letter-spacing: 4px; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 16px;"
				/>
				<button class="btn btn-primary" onclick="submitLinkCode()" id="submit-code-btn">
					Link Server
				</button>
				<div style="margin-top: 16px;">
					<label style="display: block; margin-bottom: 8px; font-weight: 600; text-align: left;">Available Models:</label>
					<div id="models-list" style="background: #f5f5f5; border: 2px solid #ddd; border-radius: 8px; padding: 12px; text-align: left; max-height: 200px; overflow-y: auto;">
						<div style="color: #666;">Loading models...</div>
					</div>
				</div>
			</div>

			<div class="success-info" style="margin-top: 20px;">
				<div class="info-item">
					<span class="label">OS:</span>
					<span class="value" id="code-os">-</span>
				</div>
				<div class="info-item">
					<span class="label">Device:</span>
					<span class="value" id="code-device">-</span>
				</div>
				<div class="info-item">
					<span class="label">CPU:</span>
					<span class="value" id="code-cpu">-</span>
				</div>
				<div class="info-item">
					<span class="label">Memory:</span>
					<span class="value" id="code-memory">-</span>
				</div>
				<div class="info-item">
					<span class="label">Graphics:</span>
					<span class="value" id="code-graphics">-</span>
				</div>
				<div class="info-item" id="code-gpu-detail-1">
					<span class="label" id="code-gpu-detail-1-label">GPU Detail 1:</span>
					<span class="value" id="code-gpu-detail-1-value">-</span>
				</div>
				<div class="info-item" id="code-gpu-detail-2">
					<span class="label" id="code-gpu-detail-2-label">GPU Detail 2:</span>
					<span class="value" id="code-gpu-detail-2-value">-</span>
				</div>
				<div class="info-item">
					<span class="label">Tunnel URL:</span>
					<span class="value" id="code-url">-</span>
				</div>
			</div>
		</div>

		<!-- Screen: Success -->
			<div class="screen" id="screen-success">
				<div class="step-indicator">
					<div class="step done"></div>
					<div class="step done"></div>
					<div class="step done"></div>
				</div>

				<div class="icon">‚úÖ</div>

			<h2>Server Linked!</h2>
			<p>Your Ollama server is now connected to Whistant</p>

			<button class="btn btn-secondary" onclick="unlinkServer()" style="margin-top: 10px; margin-bottom: 16px;">Unlink Server</button>

			<div style="margin-bottom: 16px;">
				<label style="display: block; margin-bottom: 8px; font-weight: 600; text-align: left;">Available Models:</label>
				<div id="success-models-list" style="background: #f5f5f5; border: 2px solid #ddd; border-radius: 8px; padding: 12px; text-align: left; max-height: 200px; overflow-y: auto;">
					<div style="color: #666;">Loading models...</div>
				</div>
			</div>

			<div class="success-info">
					<div class="info-item">
						<span class="label">Username:</span>
						<span class="value" id="success-username">-</span>
					</div>
					<div class="info-item">
						<span class="label">Server ID:</span>
						<span class="value" id="success-server-id">-</span>
					</div>
					<div class="info-item">
						<span class="label">URL:</span>
						<span class="value" id="success-url">-</span>
					</div>
					<div class="info-item">
						<span class="label">OS:</span>
						<span class="value" id="success-os">-</span>
					</div>
					<div class="info-item">
						<span class="label">Device:</span>
						<span class="value" id="success-device">-</span>
					</div>
					<div class="info-item">
						<span class="label">CPU:</span>
						<span class="value" id="success-cpu">-</span>
					</div>
					<div class="info-item">
						<span class="label">Memory:</span>
						<span class="value" id="success-memory">-</span>
					</div>
					<div class="info-item">
						<span class="label">Graphics:</span>
						<span class="value" id="success-graphics">-</span>
					</div>
					<div class="info-item" id="success-gpu-detail-1">
						<span class="label" id="success-gpu-detail-1-label">GPU Detail 1:</span>
						<span class="value" id="success-gpu-detail-1-value">-</span>
					</div>
					<div class="info-item" id="success-gpu-detail-2">
						<span class="label" id="success-gpu-detail-2-label">GPU Detail 2:</span>
						<span class="value" id="success-gpu-detail-2-value">-</span>
					</div>
				</div>
			</div>

			<!-- Screen: Error -->
			<div class="screen" id="screen-error">
				<div class="icon">‚ö†Ô∏è</div>

				<h2>Error</h2>
				<p id="error-message">An error occurred</p>

				<button class="btn btn-primary" onclick="resetApp()">Try Again</button>
			</div>
		</main>
	</div>

	<script src="app.js"></script>
</body>
</html>
